{"version":3,"sources":["webpack://pouch/webpack/universalModuleDefinition","webpack://pouch/webpack/bootstrap","webpack://pouch/./node_modules/shortid/lib/alphabet.js","webpack://pouch/external \"mobx\"","webpack://pouch/./src/index.js","webpack://pouch/./src/Model.js","webpack://pouch/./node_modules/shortid/index.js","webpack://pouch/./node_modules/shortid/lib/index.js","webpack://pouch/./node_modules/shortid/lib/random/random-from-seed.js","webpack://pouch/./node_modules/shortid/lib/build.js","webpack://pouch/./node_modules/shortid/lib/generate.js","webpack://pouch/./node_modules/shortid/lib/random/random-byte-browser.js","webpack://pouch/./node_modules/nanoid/format.browser.js","webpack://pouch/./node_modules/shortid/lib/is-valid.js","webpack://pouch/./node_modules/shortid/lib/util/cluster-worker-id-browser.js","webpack://pouch/./src/ModelStore.js","webpack://pouch/./src/Query.js"],"names":["default","Model","doc","__edit","Map","E","Proxy","get","obj","prop","undefined","set","val","generateId","updateFromDoc","_id","editCount","entries","Array","from","i","length","key","clearE","toJS","keys","Set","Object","concat","selfProto","getPrototypeOf","forEach","thisDescriptor","getOwnPropertyDescriptor","protoDescriptor","isComputed","configurable","e","console","warn","$mobx","isArray","map","clear","propertyName","property","observable","action","setE","save","ModelStore","db","mobPouchSettings","queries","__mobPouchSettings","changes","since","live","include_docs","on","__handleChanges","bind","mapFunc","filterOptions","query","mapFuncStr","toString","filterOptionsStr","JSON","stringify","queryList","run","Query","mapFuncOrQueryResults","_mapFunc","_filterOptions","docId","docIndex","findIndex","t","settings","then","docObj","docModel","__generateModel","push","__allQueries","q","onChange","jsDoc","put","status","ok","_rev","rev","Error","__sideLoad","decending","allDocs","rows","filter","id","indexOf","_design","substr","load","onChanges","typed","docType","type","sideLoadedDoc","deleted","__onDelete","__onChange","storeDoc","storeDocIndex","splice","onDelete","values","add","loadAll","scopedEmitFunctions","mapFuncPromise","runPromise","stringOptions","modelStore","local_query","parts","split","views","Promise","resolve","__scopeMapFunc","mapRes","designDoc","reject","__localQuery","results","total_rows","d","rdoc","docArray","reduce","__queryDocument","_doc","ind","eval","keyValues","startkey","endkey","docKeys","docKey","firstMatchingKey","value","docs","valueDoc","valueArray","prototype","prev","current","offset"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;AClFa;;AAEb,qBAAqB,mBAAO,CAAC,CAA2B;;AAExD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACtGA,gD;;;;;;;;;;;;;;;;;;0CCASA,O;;;;;;;;;+CACAA,O;;;;;;kBAEM,E;;;;;;;;;;;;;;;ACHf;;AACA;;;;;;;;;;;;IAEqBC,K;AAejB,mBAAYC,GAAZ,EAAiB;AAAA;;AAAA;;AAAA,aAbjBC,MAaiB,GAbR,IAAI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","file":"mobx-pouchdb.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"mobx\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"mobx\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pouch\"] = factory(require(\"mobx\"));\n\telse\n\t\troot[\"pouch\"] = factory(root[\"mobx\"]);\n})((typeof window !== 'undefined' ? window : this), function(__WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","'use strict';\n\nvar randomFromSeed = require('./random/random-from-seed');\n\nvar ORIGINAL = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-';\nvar alphabet;\nvar previousSeed;\n\nvar shuffled;\n\nfunction reset() {\n    shuffled = false;\n}\n\nfunction setCharacters(_alphabet_) {\n    if (!_alphabet_) {\n        if (alphabet !== ORIGINAL) {\n            alphabet = ORIGINAL;\n            reset();\n        }\n        return;\n    }\n\n    if (_alphabet_ === alphabet) {\n        return;\n    }\n\n    if (_alphabet_.length !== ORIGINAL.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. You submitted ' + _alphabet_.length + ' characters: ' + _alphabet_);\n    }\n\n    var unique = _alphabet_.split('').filter(function(item, ind, arr){\n       return ind !== arr.lastIndexOf(item);\n    });\n\n    if (unique.length) {\n        throw new Error('Custom alphabet for shortid must be ' + ORIGINAL.length + ' unique characters. These characters were not unique: ' + unique.join(', '));\n    }\n\n    alphabet = _alphabet_;\n    reset();\n}\n\nfunction characters(_alphabet_) {\n    setCharacters(_alphabet_);\n    return alphabet;\n}\n\nfunction setSeed(seed) {\n    randomFromSeed.seed(seed);\n    if (previousSeed !== seed) {\n        reset();\n        previousSeed = seed;\n    }\n}\n\nfunction shuffle() {\n    if (!alphabet) {\n        setCharacters(ORIGINAL);\n    }\n\n    var sourceArray = alphabet.split('');\n    var targetArray = [];\n    var r = randomFromSeed.nextValue();\n    var characterIndex;\n\n    while (sourceArray.length > 0) {\n        r = randomFromSeed.nextValue();\n        characterIndex = Math.floor(r * sourceArray.length);\n        targetArray.push(sourceArray.splice(characterIndex, 1)[0]);\n    }\n    return targetArray.join('');\n}\n\nfunction getShuffled() {\n    if (shuffled) {\n        return shuffled;\n    }\n    shuffled = shuffle();\n    return shuffled;\n}\n\n/**\n * lookup shuffled letter\n * @param index\n * @returns {string}\n */\nfunction lookup(index) {\n    var alphabetShuffled = getShuffled();\n    return alphabetShuffled[index];\n}\n\nfunction get () {\n  return alphabet || ORIGINAL;\n}\n\nmodule.exports = {\n    get: get,\n    characters: characters,\n    seed: setSeed,\n    lookup: lookup,\n    shuffled: getShuffled\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","export { default as Model } from './Model';\r\nexport { default as ModelStore } from './ModelStore';\r\n\r\nexport default {};\r\n","import { observable, action, decorate, runInAction, toJS } from 'mobx';\r\nimport shortid from 'shortid';\r\n\r\nexport default class Model {\r\n    _id;\r\n    __edit = new Map();\r\n    E = new Proxy({}, {\r\n        get: (obj, prop) => {\r\n            if (this.__edit.get(prop) !== undefined) {\r\n                return this.__edit.get(prop);\r\n            }\r\n            return this[prop];\r\n        },\r\n        set: (obj, prop, val) => {\r\n            runInAction(() => this.__edit.set(prop, val));\r\n            return true;\r\n        }\r\n    });\r\n    constructor(doc) {\r\n        this.generateId();\r\n        this.updateFromDoc(doc);\r\n    }\r\n\r\n    generateId() {\r\n        this._id = shortid();\r\n    }\r\n\r\n    save() {\r\n        let editCount = 0;\r\n        const entries = Array.from(this.__edit);\r\n        for (let i = 0; i < entries.length; ++i) {\r\n            const key = entries[i][0];\r\n            const val = entries[i][1]; \r\n            this[key] = val;\r\n            ++editCount;\r\n        }\r\n        this.clearE();\r\n        return !!editCount;\r\n    }\r\n\r\n    updateFromDoc(doc) {\r\n        if (doc) {\r\n            if (!!doc.toJS) {\r\n                doc = doc.toJS();\r\n            }\r\n            const keys = [...new Set(Object.keys(doc).concat(Object.keys(this.toJS())))];\r\n            const selfProto = Object.getPrototypeOf(this);\r\n            \r\n            keys.forEach((key) => {\r\n                // If the key doesn't exist but it's getter exists \r\n                // then it's computed and it can't be overridden\r\n                try {\r\n                    const thisDescriptor = Object.getOwnPropertyDescriptor(this, key);\r\n                    const protoDescriptor = Object.getOwnPropertyDescriptor(selfProto, key);\r\n                    const isComputed = (!thisDescriptor || !thisDescriptor.configurable) && protoDescriptor;\r\n                \r\n                    if (isComputed || (!doc[key] && key === '_id')) {\r\n                        return;\r\n                    } else if (!!this[key] && !!this[key].updateFromDoc) {\r\n                        this[key].updateFromDoc(doc[key]);\r\n                    } else {\r\n                        this[key] = doc[key] === undefined ? '' : doc[key];\r\n                    }\r\n                } catch (e) {\r\n                    console.warn('Failed to update field', key, e);\r\n                }\r\n            });\r\n        }\r\n    }\r\n \r\n    toJS() {\r\n        const {__edit, E, ...doc } = this;\r\n        Object.keys(doc).forEach(key => {\r\n            if (doc[key] && !!doc[key].toJS) {\r\n                doc[key] = doc[key].toJS();\r\n            } else if (doc[key] && !!doc[key].$mobx) {\r\n                doc[key] = toJS(doc[key]);\r\n            }\r\n            if (Array.isArray(doc[key])) {\r\n                doc[key] = doc[key].map((val) => {\r\n                    if (val && !!val.toJS) {\r\n                        return val.toJS();\r\n                    }\r\n                    return val;\r\n                })\r\n            }\r\n        });\r\n        return doc;\r\n    }\r\n\r\n    clearE() {\r\n        this.__edit.clear();\r\n    }\r\n \r\n    setE(propertyName, property) {\r\n        this.E[propertyName] = property;\r\n    }\r\n\r\n    getE(property) {\r\n        return this.E[property];\r\n    }\r\n}\r\n\r\ndecorate(Model, {\r\n    _id: observable,\r\n    __edit: observable,\r\n    clearE: action,\r\n    setE: action,\r\n    save: action,\r\n    generateId: action,\r\n    updateFromDoc: action\r\n});","'use strict';\nmodule.exports = require('./lib/index');\n","'use strict';\n\nvar alphabet = require('./alphabet');\nvar build = require('./build');\nvar isValid = require('./is-valid');\n\n// if you are using cluster or multiple servers use this to make each instance\n// has a unique value for worker\n// Note: I don't know if this is automatically set when using third\n// party cluster solutions such as pm2.\nvar clusterWorkerId = require('./util/cluster-worker-id') || 0;\n\n/**\n * Set the seed.\n * Highly recommended if you don't want people to try to figure out your id schema.\n * exposed as shortid.seed(int)\n * @param seed Integer value to seed the random alphabet.  ALWAYS USE THE SAME SEED or you might get overlaps.\n */\nfunction seed(seedValue) {\n    alphabet.seed(seedValue);\n    return module.exports;\n}\n\n/**\n * Set the cluster worker or machine id\n * exposed as shortid.worker(int)\n * @param workerId worker must be positive integer.  Number less than 16 is recommended.\n * returns shortid module so it can be chained.\n */\nfunction worker(workerId) {\n    clusterWorkerId = workerId;\n    return module.exports;\n}\n\n/**\n *\n * sets new characters to use in the alphabet\n * returns the shuffled alphabet\n */\nfunction characters(newCharacters) {\n    if (newCharacters !== undefined) {\n        alphabet.characters(newCharacters);\n    }\n\n    return alphabet.shuffled();\n}\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction generate() {\n  return build(clusterWorkerId);\n}\n\n// Export all other functions as properties of the generate function\nmodule.exports = generate;\nmodule.exports.generate = generate;\nmodule.exports.seed = seed;\nmodule.exports.worker = worker;\nmodule.exports.characters = characters;\nmodule.exports.isValid = isValid;\n","'use strict';\n\n// Found this seed-based random generator somewhere\n// Based on The Central Randomizer 1.3 (C) 1997 by Paul Houle (houle@msc.cornell.edu)\n\nvar seed = 1;\n\n/**\n * return a random number based on a seed\n * @param seed\n * @returns {number}\n */\nfunction getNextValue() {\n    seed = (seed * 9301 + 49297) % 233280;\n    return seed/(233280.0);\n}\n\nfunction setSeed(_seed_) {\n    seed = _seed_;\n}\n\nmodule.exports = {\n    nextValue: getNextValue,\n    seed: setSeed\n};\n","'use strict';\n\nvar generate = require('./generate');\nvar alphabet = require('./alphabet');\n\n// Ignore all milliseconds before a certain time to reduce the size of the date entropy without sacrificing uniqueness.\n// This number should be updated every year or so to keep the generated id short.\n// To regenerate `new Date() - 0` and bump the version. Always bump the version!\nvar REDUCE_TIME = 1567752802062;\n\n// don't change unless we change the algos or REDUCE_TIME\n// must be an integer and less than 16\nvar version = 7;\n\n// Counter is used when shortid is called multiple times in one second.\nvar counter;\n\n// Remember the last time shortid was called in case counter is needed.\nvar previousSeconds;\n\n/**\n * Generate unique id\n * Returns string id\n */\nfunction build(clusterWorkerId) {\n    var str = '';\n\n    var seconds = Math.floor((Date.now() - REDUCE_TIME) * 0.001);\n\n    if (seconds === previousSeconds) {\n        counter++;\n    } else {\n        counter = 0;\n        previousSeconds = seconds;\n    }\n\n    str = str + generate(version);\n    str = str + generate(clusterWorkerId);\n    if (counter > 0) {\n        str = str + generate(counter);\n    }\n    str = str + generate(seconds);\n    return str;\n}\n\nmodule.exports = build;\n","'use strict';\n\nvar alphabet = require('./alphabet');\nvar random = require('./random/random-byte');\nvar format = require('nanoid/format');\n\nfunction generate(number) {\n    var loopCounter = 0;\n    var done;\n\n    var str = '';\n\n    while (!done) {\n        str = str + format(random, alphabet.get(), 1);\n        done = number < (Math.pow(16, loopCounter + 1 ) );\n        loopCounter++;\n    }\n    return str;\n}\n\nmodule.exports = generate;\n","'use strict';\n\nvar crypto = typeof window === 'object' && (window.crypto || window.msCrypto); // IE 11 uses window.msCrypto\n\nvar randomByte;\n\nif (!crypto || !crypto.getRandomValues) {\n    randomByte = function(size) {\n        var bytes = [];\n        for (var i = 0; i < size; i++) {\n            bytes.push(Math.floor(Math.random() * 256));\n        }\n        return bytes;\n    };\n} else {\n    randomByte = function(size) {\n        return crypto.getRandomValues(new Uint8Array(size));\n    };\n}\n\nmodule.exports = randomByte;\n","// This file replaces `format.js` in bundlers like webpack or Rollup,\n// according to `browser` config in `package.json`.\n\nmodule.exports = function (random, alphabet, size) {\n  // We canâ€™t use bytes bigger than the alphabet. To make bytes values closer\n  // to the alphabet, we apply bitmask on them. We look for the closest\n  // `2 ** x - 1` number, which will be bigger than alphabet size. If we have\n  // 30 symbols in the alphabet, we will take 31 (00011111).\n  // We do not use faster Math.clz32, because it is not available in browsers.\n  var mask = (2 << Math.log(alphabet.length - 1) / Math.LN2) - 1\n  // Bitmask is not a perfect solution (in our example it will pass 31 bytes,\n  // which is bigger than the alphabet). As a result, we will need more bytes,\n  // than ID size, because we will refuse bytes bigger than the alphabet.\n\n  // Every hardware random generator call is costly,\n  // because we need to wait for entropy collection. This is why often it will\n  // be faster to ask for few extra bytes in advance, to avoid additional calls.\n\n  // Here we calculate how many random bytes should we call in advance.\n  // It depends on ID length, mask / alphabet size and magic number 1.6\n  // (which was selected according benchmarks).\n\n  // -~f => Math.ceil(f) if n is float number\n  // -~i => i + 1 if n is integer number\n  var step = -~(1.6 * mask * size / alphabet.length)\n  var id = ''\n\n  while (true) {\n    var bytes = random(step)\n    // Compact alternative for `for (var i = 0; i < step; i++)`\n    var i = step\n    while (i--) {\n      // If random byte is bigger than alphabet even after bitmask,\n      // we refuse it by `|| ''`.\n      id += alphabet[bytes[i] & mask] || ''\n      // More compact than `id.length + 1 === size`\n      if (id.length === +size) return id\n    }\n  }\n}\n","'use strict';\nvar alphabet = require('./alphabet');\n\nfunction isShortId(id) {\n    if (!id || typeof id !== 'string' || id.length < 6 ) {\n        return false;\n    }\n\n    var nonAlphabetic = new RegExp('[^' +\n      alphabet.get().replace(/[|\\\\{}()[\\]^$+*?.-]/g, '\\\\$&') +\n    ']');\n    return !nonAlphabetic.test(id);\n}\n\nmodule.exports = isShortId;\n","'use strict';\n\nmodule.exports = 0;\n","import { action, extendObservable, decorate, runInAction } from 'mobx';\r\nimport Query from './Query';\r\n \r\nexport default class ModelStore {\r\n    queries = {};\r\n\r\n    constructor(propertyName, Model, db, mobPouchSettings = {}) {\r\n        this.propertyName = propertyName;\r\n        this.Model = Model;\r\n        this.db = db;\r\n        this.__mobPouchSettings = mobPouchSettings;\r\n        extendObservable(this, {\r\n            [propertyName]: []\r\n        });\r\n        this.db.changes({\r\n            since: 'now',\r\n            live: true,\r\n            include_docs: true\r\n        }).on('change', this.__handleChanges.bind(this));\r\n    }\r\n\r\n    query(mapFunc, filterOptions) {\r\n        let query;\r\n        if (filterOptions.live) {\r\n            const mapFuncStr = mapFunc.toString();\r\n            const filterOptionsStr = JSON.stringify(filterOptions);\r\n            const queryList = this.queries[mapFuncStr] || {};\r\n            if (queryList[filterOptionsStr]) {\r\n                query = queryList[filterOptionsStr];\r\n                return query.run(this);\r\n            } else {\r\n                query = new Query(mapFunc, filterOptions, this.propertyName);\r\n                queryList[filterOptionsStr] = query;\r\n                this.queries[mapFuncStr] = queryList;\r\n            }\r\n        } else {\r\n            query = new Query(mapFunc, filterOptions, this.propertyName);\r\n        }\r\n        return query.run(this);\r\n    }\r\n\r\n    removeQuery(mapFuncOrQueryResults, filterOptions) {\r\n        let mapFunc = mapFuncOrQueryResults;\r\n        if (!filterOptions) {\r\n            mapFunc = mapFuncOrQueryResults._mapFunc;\r\n            filterOptions = mapFuncOrQueryResults._filterOptions;\r\n        }\r\n        const filterOptionsStr = JSON.stringify(filterOptions);\r\n        const mapFuncStr = mapFunc.toString();\r\n        if(!!this.queries[mapFuncStr] && !!this.queries[mapFuncStr][filterOptionsStr]) {\r\n            if (Object.keys(this.queries[mapFuncStr]).length === 1) {\r\n                delete this.queries[mapFuncStr];\r\n            } else {\r\n                delete this.queries[mapFuncStr][filterOptionsStr];\r\n            }\r\n        }\r\n    }\r\n\r\n    get(docId) {\r\n        const docIndex = this[this.propertyName].findIndex((t) => {\r\n            return t._id === docId\r\n        });\r\n        if (docIndex > -1) {\r\n            return this[this.propertyName][docIndex];\r\n        }\r\n        return null;\r\n    }\r\n \r\n    load(docId, settings = {}) {\r\n        let doc = this.get(docId);\r\n        if (doc) {\r\n            return doc;\r\n        }\r\n        return this.db.get(docId, settings).then((docObj) => {\r\n            const docModel = this.__generateModel(docObj);\r\n            runInAction(() => this[this.propertyName].push(docModel));\r\n            this.__allQueries().forEach(q => q.onChange(this, docObj));\r\n            return docModel;\r\n        });\r\n    }\r\n\r\n    add(doc) {\r\n        const jsDoc = (doc.toJS && doc.toJS()) || doc;\r\n        return this.db.put(jsDoc).then((status) => {\r\n            if (status.ok) {\r\n                jsDoc._rev = status.rev;\r\n            }\r\n            else {\r\n                throw new Error(status);\r\n            }\r\n            return this.__sideLoad(jsDoc);\r\n        });\r\n    }\r\n\r\n    loadAll(settings = { include_docs: true, decending: true }, mobPouchSettings = { live: true }) {\r\n        this.__mobPouchSettings = { ...this.__mobPouchSettings, ...mobPouchSettings };\r\n        return this.db.allDocs(settings).then((allDocs) => {\r\n            const rows = allDocs.rows.filter((doc) => {\r\n                if (doc.id.indexOf('_design') === 0) {\r\n                    this._design = this._design || {};\r\n                    this._design[doc.id.substr(8)] = doc.doc;\r\n                    return false;\r\n                }\r\n                return true;\r\n            })\r\n            runInAction(() =>this[this.propertyName] = rows.map(doc => this.__generateModel(doc.doc)));\r\n            this[this.propertyName].forEach(doc => this.load(doc._id));\r\n            this.__allQueries().forEach(q => q.onChanges(this, rows));\r\n            return this[this.propertyName];\r\n        });\r\n    }\r\n\r\n    __generateModel(doc) {\r\n        if (this.__mobPouchSettings.typed) {\r\n            let docType = doc.type || 'default';\r\n            if (!this.Model[docType]) {\r\n                throw new Error(`Model type:${docType} not found`);\r\n            }\r\n            return new this.Model[docType](doc); \r\n        } else {\r\n            return new this.Model(doc);\r\n        }\r\n    }\r\n\r\n    __sideLoad(doc) {\r\n        const sideLoadedDoc = this.__generateModel(doc);\r\n        this[this.propertyName].push(sideLoadedDoc);\r\n        return this.load(doc._id);\r\n    }\r\n \r\n    __handleChanges(rev) {\r\n        if (rev.deleted) {\r\n            this.__onDelete(rev.doc, rev);\r\n        }\r\n        else if (rev.changes) {\r\n            this.__onChange(rev.doc, rev);\r\n        }\r\n    }\r\n\r\n    __onChange(doc, rev) {\r\n        const storeDoc = this[this.propertyName].filter(storeDoc => storeDoc._id === doc._id)[0];\r\n        if (storeDoc) {\r\n            storeDoc.updateFromDoc(doc);\r\n        } else if (this.__mobPouchSettings.live) {\r\n            this.__sideLoad(doc);\r\n        }\r\n        this.__allQueries().forEach(q => q.onChange(this, doc));\r\n    }\r\n\r\n    __onDelete(doc) {\r\n        const storeDocIndex = this[this.propertyName].findIndex(storeDoc => storeDoc._id === doc._id);\r\n        if (storeDocIndex > -1) {\r\n            this[this.propertyName].splice(storeDocIndex, 1);\r\n        }\r\n        this.__allQueries().forEach(q => q.onDelete(doc));\r\n    }\r\n\r\n    __allQueries() {\r\n        const queries = [].concat(...Object.values(this.queries).map(q => Object.values(q)));\r\n        return queries;\r\n    }\r\n\r\n}\r\n\r\ndecorate(ModelStore, {\r\n    add: action,\r\n    load: action,\r\n    loadAll: action,\r\n    __sideLoad: action,\r\n    __onChange: action,\r\n    __onDelete: action\r\n});","import { action, extendObservable, decorate, runInAction } from 'mobx';\n\nconst scopedEmitFunctions = {};\n\nexport default class Query {\n    mapFuncPromise = null;\n    runPromise = null;\n\n    _filterOptions;\n    _mapFunc;\n    propertyName;\n\n    constructor(mapFunc, filterOptions, propertyName) {\n        this._mapFunc = mapFunc;\n        this._filterOptions = filterOptions;\n        this.propertyName = propertyName;\n        const stringOptions = JSON.stringify(filterOptions);\n\n        extendObservable(this, {\n            [propertyName]: [],\n            results: null\n        });\n\n    }\n\n    run(modelStore) {\n        if(!this.runPromise || !this._filterOptions.live) {\n            if ((this._filterOptions.live || this._filterOptions.local_query) && typeof this._mapFunc === 'string') {\n                const parts = this._mapFunc.split('/');\n                this.mapFuncPromise;\n                if (modelStore._design && modelStore._design[parts[0]]) {\n                    const doc = modelStore._design[parts[0]].views[parts[1]];\n                    this.mapFuncPromise = Promise.resolve({ ...doc, map: this.__scopeMapFunc(doc.map) });\n                } else {\n                    this.mapFuncPromise = modelStore.db.get('_design/' + parts[0]).then((mapRes) => {\n                        modelStore._design = modelStore._design || {};\n                        modelStore._design[parts[0]] = mapRes;\n                        const doc = mapRes.views[parts[1]];\n                        return { ...doc, map: this.__scopeMapFunc(doc.map) };\n                    });\n                }\n            } else {\n                this.mapFuncPromise = Promise.resolve({ map: this.__scopeMapFunc(this._mapFunc) })\n            }\n\n            this.runPromise = this.mapFuncPromise.then((designDoc) => {\n                return new Promise((resolve, reject) => {\n                    if (this._filterOptions.local_query) {\n                        resolve(this.__localQuery(modelStore, designDoc, this._filterOptions));\n                    } else {\n                        resolve(modelStore.db.query(this._mapFunc, this._filterOptions))\n                    }\n                }).then((results) => {\n                    this.results = results;\n                    if (results.total_rows !== undefined && this._filterOptions.include_docs) {\n                        this[this.propertyName] =  results.rows.map(d => modelStore.get(d.doc._id) || modelStore.__sideLoad(d.doc))\n                    }\n                    return this;\n                });\n            });\n        }\n        return this.runPromise;\n    }\n\n    onDelete(doc) {\n        const docIndex = this[this.propertyName].findIndex(rdoc => rdoc._id === doc._id);\n        if (docIndex > -1) {\n            this[this.propertyName].splice(docIndex, 1);\n        }\n    }\n\n    onChanges(modelStore, docArray) {\n        docArray.forEach(doc => this.onChange(modelStore, doc));\n    }\n\n    onChange(modelStore, doc) {\n        this.mapFuncPromise.then((mapFunc) => {\n            if (mapFunc.reduce) {\n                return;\n            }\n            const docIndex = this[this.propertyName].findIndex(rdoc => rdoc._id === doc._id);\n            if (this.__queryDocument(doc, mapFunc.map, this._filterOptions).doc) {\n                if (docIndex === -1) {\n                    runInAction(() => {this[this.propertyName].push(modelStore.get(doc._id) || modelStore.__sideLoad(doc));});\n                }\n            }\n            else {\n                if (docIndex > -1) {\n                    runInAction(() => {this[this.propertyName] = this[this.propertyName].filter((_doc, ind) => ind !== docIndex)});\n                }\n            }\n        });\n    }\n\n    __scopeMapFunc(mapFunc) {\n        const mapFuncStr = mapFunc.toString();\n        if (!scopedEmitFunctions[mapFuncStr]) {\n            // couchdb puts emit in a global scope\n            scopedEmitFunctions[mapFuncStr] = eval(`\n                (function queryDocumentKeys(key, doc) {\n                    var keyValues = {};\n                    function emit(key, value) {\n                        if (!keyValues[key]) {\n                            keyValues[key] = [];\n                        }\n                        keyValues[key].push(value || null);\n                    }\n                    var x = ${mapFuncStr};\n                    x(doc, emit);\n                    return keyValues;\n                })\n            `);\n        }\n        return scopedEmitFunctions[mapFuncStr];\n    }\n\n    __queryDocument(doc, mapFunc, filterOptions) {\n        let keyValues = mapFunc(filterOptions.key, doc);\n        if (filterOptions.startkey && filterOptions.endkey) {\n            const docKeys = Object.keys(keyValues);\n            let [ firstMatchingKey = undefined ] = docKeys.filter((docKey) => docKey >= filterOptions.startkey && docKey <= filterOptions.endkey);\n            return { value: keyValues[firstMatchingKey], doc: keyValues[firstMatchingKey] && doc }\n        } else {\n            return { value: keyValues[filterOptions.key], doc: keyValues[filterOptions.key] && doc };\n        }\n    }\n\n    __localQuery(modelStore, designDoc, filterOptions) {\n        const docs = modelStore[modelStore.propertyName].map(doc => this.__queryDocument(doc, designDoc.map, filterOptions)).filter(valueDoc => valueDoc.doc);\n        if (designDoc.reduce) {\n            let rows = [];\n            const values = docs.map(valueDoc => valueDoc.value)\n            const valueArray = Array.prototype.concat(...values);\n\n            if (designDoc.reduce === '_sum') {\n                rows.push({\n                    value: valueArray.reduce((prev, current) => prev + current * 1, 0),\n                    key: null\n                });\n            } else if (designDoc.reduce === '_count') {\n                rows.push({\n                    value: valueArray.length,\n                    key: null\n                });\n            }\n            return {\n                rows\n            };\n        } else {\n            return {\n                total_rows: this[this.propertyName].length,\n                offset: 0,\n                rows: docs.map(valueDoc => ({ id: valueDoc.doc._id, key: filterOptions.key, doc: valueDoc.doc }))\n            };\n        }\n    }\n}\n\ndecorate(Query, {\n    onChange: action,\n    onDelete: action\n});"],"sourceRoot":""}